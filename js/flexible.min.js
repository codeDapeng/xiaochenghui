!function(e,t){function v(){var t=i.getBoundingClientRect().width;t/a>540&&(t=540*a);var n=t/10;i.style.fontSize=n+"px",l.rem=e.rem=n}var u,n=e.document,i=n.documentElement,r=n.querySelector('meta[name="viewport"]'),o=n.querySelector('meta[name="flexible"]'),a=0,s=0,l=t.flexible||(t.flexible={});if(r){console.warn("将根据已有的meta标签来设置缩放比例");var f=r.getAttribute("content").match(/initial\-scale=([\d\.]+)/);f&&(s=parseFloat(f[1]),a=parseInt(1/s))}else if(o){var c=o.getAttribute("content");if(c){var d=c.match(/initial\-dpr=([\d\.]+)/),p=c.match(/maximum\-dpr=([\d\.]+)/);d&&(a=parseFloat(d[1]),s=parseFloat((1/a).toFixed(2))),p&&(a=parseFloat(p[1]),s=parseFloat((1/a).toFixed(2)))}}if(!a&&!s){var m=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),g=e.devicePixelRatio;a=m?g>=3&&(!a||a>=3)?3:g>=2&&(!a||a>=2)?2:1:1,s=1/a}if(i.setAttribute("data-dpr",a),!r)if(r=n.createElement("meta"),r.setAttribute("name","viewport"),r.setAttribute("content","initial-scale="+s+", maximum-scale="+s+", minimum-scale="+s+", user-scalable=no"),i.firstElementChild)i.firstElementChild.appendChild(r);else{var y=n.createElement("div");y.appendChild(r),n.write(y.innerHTML)}e.addEventListener("resize",function(){clearTimeout(u),u=setTimeout(v,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(u),u=setTimeout(v,300))},!1),"complete"===n.readyState?n.body.style.fontSize=12*a+"px":n.addEventListener("DOMContentLoaded",function(e){n.body.style.fontSize=12*a+"px"},!1),v(),l.dpr=e.dpr=a,l.refreshRem=v,l.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},l.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}));
